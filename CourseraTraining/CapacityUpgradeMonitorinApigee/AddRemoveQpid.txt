Hello and welcome to capacity planning and
scaling, adding and removing Qpid servers. In this lesson, we'll start with
providing some background information, and then moving on to adding Qpid
servers and removing Qpid servers. Firstly, a little bit of a refresher for
Qpid nodes. Qpid is the message broker used
by Edge's analytics platform. Analytics uses a data structure
called analytics groups containing information
regarding which Qpid and Postgres servers are associated to any
given organization and environment. In the on-screen example, we can see
we have a single analytics group. This has a single scope
associated with it, specifying the prod environment
within the training lab organization. The scope lists two comma separated
Qpid servers as its members. So now we're seeing high
traffic in our planet. How do we add Qpid capacity
to our analytics capability? Adding the new Qpid nodes
takes a number of steps. To start with, we need to determine
the analytics and consumer group names. In the default installation, these are set
to axgroup-001 and consumer-group-001. If you're unsure as to the names, or
if you just want to verify the names to be used, you can use the apigee-adminapi.sh
tool, as shown on the screen. The tool takes the arguments,
analytics, groups, and lists, and additionally,
the username to be used for the call. Piping the output to grep name
cleans up the complete output and just displays the group names. Next, we install the Qpid software. To do this, we use the apigee-setup
utility, pass it the profile qs for Qpid and the ConfigFile used when
we originally set up the planet. Once the setup is complete, we make
a call to the server API, as shown, to obtain the UUID,
which we'll use in the next section. Finally, using the information
we have gathered so far, we can add the new Qpid server
to our analytics and consumer groups. This is again done using
management API curls. The first curl uses the analytics
group name along with the UUID to add a new server with type qpid-server. In the second curl,
we have the server to the consumer group. At this point, our new Qpid server will start to receive
analytics events from the message processes associated with the scope served
by the analytics group we added it to. Next, we're going to look at
how we remove Qpid nodes. Again, we go through the process described
during adding nodes to determine the analystics and consumer group names. We use the server API curl on the Qpid
server we're removing to get its UUID to use in the next steps. Now, we have the group names and the UUID. First, we remove the server
from the consumer group using the management API
curl shown on screen. Next, we remove the Qpid server
from the analytics group. And finally, we completely remove
the server using the last API curl. If required, the software can be
uninstalled and the server decommissioned. This concludes capacity planning and
scaling, adding and removing Qpid servers. For more information,
you can visit docs.apigee.com. To get involved in the community,
please go to community.apigee.com. Thank you.