Let's move our attention from hybrid connectivity to
shared VPC networks. In the simplest
Cloud environment, a single project might
have one VPC network, spanning many regions
with VM instances hosting very large and
complicated applications. However, many organizations
commonly deploy multiple isolated projects with multiple VPC networks
and sublets. In this lesson, we
are going to cover two configurations for sharing VPC networks across GCP projects. First, we will go over
shared VPC which allows you to share a network across several projects in
your GCP organization. Then, we will go over VPC Network Peering which
allows you to configure private communication
across projects in same or different
organizations. Shared VPC allows an
organization to connect resources from multiple projects
to a common VPC network. This allows the resources to communicate with
each other securely, and efficiently using internal
IPs from that network. For example, in this diagram, there is one network
that belongs to the web application
servers project. This network is shared
with three other projects. Namely, the
recommendation service, the personalization service,
and the analytics service. Each of those service projects
has instances that are in the same network as the
web application server, and allow for private
communication to that server using the
internal IP addresses. The web application server communicates with
clients and on-premises, using the server's
external IP address. The backend services in
contrast can not be reached externally because they only communicate using
internal IP addresses. When you shared VPC, you designate a project
as a host project, and attach one or more other
service projects to it. In this case, the web
application servers project is the host project. The three other projects
are the service projects. The overall VPC network is
called the shared VPC network. VPC Network Peering in contrast, allows private RFC
1918 connectivity across two VPC networks, regardless of whether they
belong to the same project, or the same organization. Now, remember that each
VPC network will have firewall rules that define what traffic is allowed or denied
between the networks. For example, in this diagram, there are two organizations
that represent a consumer and a
producer respectively. Each organization has its
own organization node. VPC network, virtual
machine instances, network admin, and
instance admin. In order for VPC Network Peering to be established successfully, the producer network
admin needs to peer the producer network
with the consumer network. The consumer network
admin needs to peer the consumer network with
the producer network. When both peering
connections are created, the VPC Network Peering session becomes active and
routes are exchanged. This allows the virtual machine
instances to communicate privately using their
internal IP addresses. VPC Network Peering is a decentralized or
distributed approach to multiproject networking. Because each VPC network, may remain under the control of separate administrator groups, and maintains its
own global firewall, and routing tables. Historically, such projects would consider external IP addresses or VPNs to facilitate private communication
between VPC networks. However, VPC Network Peering does not incur the
network latency, security, and cost
drawbacks that are present when using external
IP addresses or VPNs. Now that we've talked
about shared VPC, and VPC Network Peering, let me compare both of these
configurations to help you decide which is appropriate
for a given situation. If you want to configure
a private communication between VPC networks in
different organizations, you have to use VPC
Network Peering. Shared VPC only works within
the same organization. Somewhat similarly, if
you want to configure private communication
between VPC networks in the same project, you have to use VPC
Network Peering. This doesn't mean that the networks need to be
in the same project, but they can be. Shared. VPC, only
works across projects. In my opinion, the biggest
difference between the two configurations is the network
administration models. Shared VPC is a centralized approach to
multi-project networking because security
and network policy occurs in a single
designated VPC network. In contrast, VPC Network Peering is a
decentralized approach because each VPC
network can remain under the control of separate
administrator groups, and maintains its
own global firewall, and routing tables. If you want to learn more about shared VPC and VPC Peering, I recommend the networking in Google Cloud Platform course, which you can find in the
links section of this video.