Hello, in this lesson we will talk
about upgrading Apigee components. In the previous lesson, you saw
an overview of the profile set up process. Now, let's see what's that
process looks like in action. Here is the existing installation
that we would be upgrading. Remember that we have Cassandra and
Zoo Keeper on hosts 1 through 3. Management services on host 1. Routers and
message processors on host 2 and 3. Analytic services on host 4 and 5. And, the developer portal on host 6. First we'll upgrade all CS and
ZK components. These are on the data stores
on hosts one through three. Next, we will upgrade all QPID and
ps components. If they were on seperate hosts,
you would upgrade QPID first, then ps, but because they are stacked together on hosts
4 and 5, you can run them simultaneously. Next, we upgrade the Ldap
component on host 1. After that, we can perform the Edge
component upgrade in order on hosts 4,5,1,2 and 3. This order is defined in the upgrade
procedure documentation. Finally, we upgrade the UI
component on host 1. With Edge Services upgraded we can
move onto the developer portal. We first upgrade the underlying
database with PS component. Then we upgrade the developer
portal front end with DP component. The command we will be using to
set up profiles is update.sh -f the path to your file -c and
the component name separated by commas. In the upgrade bootstrapping lesson,
we prepared our hosts for the component upgrade process. This lesson assumes that all
hosts in your Apigee planet have been successfully bootstrapped
to the newer version of Apigee. All files used for
upgrading are located in /temp/apigee. For this demo,
we are using response-edge.txt. Response-pdb.txt and response-dp.txt. The response files
are used by Edge Services, the developer portal database and
the developer portal respectively. No changes have been made
to the response files, so they are identical to the ones we used for
the installation. Here, the first Cassandra and
ZooKeeper upgrade is occurring. As we upgrade components, you should
start to notice some common themes. The first step is to upgrade
the underlying software using new RPMs so you will see a section
with output from yum. Next, any changes to the data that
the service uses will be made. For instance, the management server
will have a large section of output as it logs into the Cassandra database
repeatedly to apply schema updates. Finally, any new or updated configuration
settings will be applied if needed and services will be restarted. Let's update Cassandra and
zookeeper on the second host And finally Cassandra and
Zoo Keeper on the third host. Next we update cupid and
PS on the fourth host. This will update the cupid and
the postcrestuel components Here is the cupid and
PS upgrade on the fifth host. Next, we have to circle back to host 1 and
upgrade the LDAP component. That completes the open-source
components that support Edge Services. Now we can upgrade the Edge
component on hosts 4 and 5. Next is the Edge component on host 1. Finally, the routers and processors are upgraded with
the Edge component on hosts 2 and 3. The last edge service to be
upgraded is the Enterprise UI. Here, the UI component is
being upgraded on host 1. That's it for Edge Services. Now, we move onto the developer portal,
upgrading the PS component on Host 6. This maps nicely to the PDB profile
we used at installation time, since that profile contains
only the PostgresSQL database without the accompanying
Postgres server instance. Note that we are using
a different response file for this step since the developer portal
has its own set of response files. And last,
we upgrade the DP component on host 6. Again, we are using a different
response file here located at /temp/apigee/response-dp.txt. The final step in upgrading
the developer portal is to visit http:// the address
of the developer portal, port 8079/update.php. Some but not all releases will require
that you complete the update wizard, if no action is required
the wizard will let you know. And that's it. All components have been upgraded. For more information on this topic,
refer to our documentation. If you have any questions,
please post them on our community. Thanks for watching.