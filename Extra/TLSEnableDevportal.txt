1. Obtain your TLS key and certificate. For this example, the cert is in a file named server.crt and the key is in server.key.

2. Upload your cert and key to the portal server to /opt/apigee/customer/nginx/ssl.
If the directory does not exist, create it and change the owner to the "apigee" user:

mkdir /opt/apigee/customer/nginx/ssl
chown apigee:apigee /opt/apigee/customer/nginx/ssl
Change the owner of the cert and key to the "apigee" user:

chown apigee:apigee /opt/apigee/customer/nginx/ssl/server.crt
chown apigee:apigee /opt/apigee/customer/nginx/ssl/server.key

3.Open /opt/apigee/customer/application/drupal-devportal.properties in an editor. If the file and directory do not exist, create them.
Set the following properties in drupal-devportal.properties:

conf_devportal_ssl_block=ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/server.crt; ssl_certificate_key /opt/apigee/customer/nginx/ssl/server.key;
conf_devportal_http_https_redirect=
conf_devportal_fastcgi_https=fastcgi_param HTTPS on; fastcgi_param HTTP_SCHEME https;
Set conf_devportal_ssl_block to the path to the cert and key files. You are not required to modify the other properties.

"[aullah@led36914 application]$ cat drupal-devportal.properties
conf_devportal_ssl_block=ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.cert; ssl_certificate_key /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.key; ssl_protocols TLSv1.2;
conf_devportal_http_https_redirect=
conf_devportal_fastcgi_https=fastcgi_param HTTPS on; fastcgi_param HTTP_SCHEME https;
conf_php_upload_max_filesize = 200M
conf_php_max_execution_time = 2000
conf_php_post_max_size = 200M
conf_php_max_input_time = 300
conf_php_memory_limit = 2048M
conf_php_max_input_vars = 10000
"

Save the file.
4. Restart the portal:

/opt/apigee/apigee-service/bin/apigee-service apigee-drupal-devportal restart

Output :

sudo /opt/apigee/apigee-service/bin/apigee-service apigee-drupal-devportal restart
OK: apigee-drupal-devportal stopped successfully
NOTICE: apigee-drupal-devportal is not running (no pidfile).
The file conf/devportal.properties was changed
[ChangeDelta, position: 6, lines: [ssl_block=ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.cert; ssl_certificate_key /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.key;] to [ssl_block=ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.cert; ssl_certificate_key /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.key; ssl_protocols TLSv1.2;]]
The file conf/apigee-drupal-devportal-nginx.conf was changed
[ChangeDelta, position: 6, lines: [    ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.cert; ssl_certificate_key /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.key;] to [    ssl on; ssl_certificate /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.cert; ssl_certificate_key /opt/apigee/customer/nginx/ssl/wildcard-west-nov2022.key; ssl_protocols TLSv1.2;]]
apigee-configutil: apigee-drupal-devportal: # OK
apigee-service: apigee-lb: pid=9744
apigee-service: apigee-lb: Not running (DEAD)
apigee-service: apigee-lb: OK
apigee-configutil: apigee-lb: # OK
apigee-service: apigee-lb: Not running (NO_LOCKFILE)
apigee-service: apigee-lb: status=2, continuing
apigee-service: apigee-lb: OK
apigee-service: apigee-lb: apigee-lb is running
OK: apigee-drupal-devportal started

Validations:
************

Pre Change test:
------------------
[aullah@led36914 ~]$ nmap -sV --script ssl-enum-ciphers -p 443 devtest-portal-apimarketplace.west.com

Starting Nmap 6.40 ( http://nmap.org ) at 2022-02-08 12:30 EST
Nmap scan report for devtest-portal-apimarketplace.west.com (10.71.178.22)
Host is up (0.067s latency).
rDNS record for 10.71.178.22: led36929.west.com
PORT    STATE SERVICE  VERSION
443/tcp open  ssl/http nginx 1.14.0
| ssl-enum-ciphers:
|   SSLv3: No supported ciphers found
|   TLSv1.0:
|     ciphers:
|       TLS_RSA_WITH_AES_128_CBC_SHA - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA - strong
|     compressors:
|       NULL
|   TLSv1.1:
|     ciphers:
|       TLS_RSA_WITH_AES_128_CBC_SHA - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA - strong
|     compressors:
|       NULL
|   TLSv1.2:
|     ciphers:
|       TLS_RSA_WITH_AES_128_CBC_SHA - strong
|       TLS_RSA_WITH_AES_128_CBC_SHA256 - strong
|       TLS_RSA_WITH_AES_128_CCM - strong
|       TLS_RSA_WITH_AES_128_CCM_8 - strong
|       TLS_RSA_WITH_AES_128_GCM_SHA256 - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA256 - strong
|       TLS_RSA_WITH_AES_256_CCM - strong
|       TLS_RSA_WITH_AES_256_CCM_8 - strong
|       TLS_RSA_WITH_AES_256_GCM_SHA384 - strong
|       TLS_RSA_WITH_ARIA_128_GCM_SHA256 - strong
|       TLS_RSA_WITH_ARIA_256_GCM_SHA384 - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA256 - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA256 - strong
|     compressors:
|       NULL
|_  least strength: strong

Service detection performed. Please report any incorrect results at http://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 23.52 seconds

Post Change test:
------------------
[aullah@led36914 ~]$ nmap -sV --script ssl-enum-ciphers -p 443 devtest-portal-apimarketplace.west.com

Starting Nmap 6.40 ( http://nmap.org ) at 2022-02-08 12:35 EST
Nmap scan report for devtest-portal-apimarketplace.west.com (10.71.178.22)
Host is up (0.067s latency).
rDNS record for 10.71.178.22: led36929.west.com
PORT    STATE SERVICE  VERSION
443/tcp open  ssl/http nginx 1.14.0
| ssl-enum-ciphers:
|   SSLv3: No supported ciphers found
|   TLSv1.2:
|     ciphers:
|       TLS_RSA_WITH_AES_128_CBC_SHA - strong
|       TLS_RSA_WITH_AES_128_CBC_SHA256 - strong
|       TLS_RSA_WITH_AES_128_CCM - strong
|       TLS_RSA_WITH_AES_128_CCM_8 - strong
|       TLS_RSA_WITH_AES_128_GCM_SHA256 - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA - strong
|       TLS_RSA_WITH_AES_256_CBC_SHA256 - strong
|       TLS_RSA_WITH_AES_256_CCM - strong
|       TLS_RSA_WITH_AES_256_CCM_8 - strong
|       TLS_RSA_WITH_AES_256_GCM_SHA384 - strong
|       TLS_RSA_WITH_ARIA_128_GCM_SHA256 - strong
|       TLS_RSA_WITH_ARIA_256_GCM_SHA384 - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_128_CBC_SHA256 - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA - strong
|       TLS_RSA_WITH_CAMELLIA_256_CBC_SHA256 - strong
|     compressors:
|       NULL
|_  least strength: strong

