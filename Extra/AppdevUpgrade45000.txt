A.Short Description: Upgrade all servers in the Apigee appdev planet to version 4.50.00

B.Description:
PLATFORM: Apigee Appdev planet servers for test/dev  environments.

DUE DATE: 06/17/2021 at 1600 Central


Platform Engineering (Bikram Ghosh/Mohammed Amdad Ullah) will upgrade all servers in the Apigee Appdev planet to version 4.50.00.
API onboarding team will test all API proxy services per post change plan.

The API onboarding team and internal stakeholders have been notified.  

Version upgrade will be performed one server at a time so there is no expected impact to real-time traffic since this change is in appdev environments. 
The other remaining servers will continue to take all real-time traffic.

Diiferent versions upgrade has already been performed in the Apigee AppDev planet few times previously without issues.

BRIEF DESCRIPTION:

Upgrades will be performed to the apigee components in a specific order and one server at a time.

For each Router/Message processor server, it will be disabled on the F5 and disassociated from the dev and test environment.
Once the upgrade is done for that server,  the API onboarding team and Bikram/Amdad (Platform) will test all APIs on the dev/test environments on that server before enabling it back on the F5. The dev and the test environment will then be enabled and tested on the server.

Once all components are upgraded, the API onboarding team will perform final tests.


C.Clients at Risk/Risk Mitigation Measures: 
API Producers have been notifed about this work.

Version upgrade will be performed one server at a time so there is no expected impact to real-time traffic since upgrade is on appdev environment. 
The other remaining servers will continue to take all real-time traffic.


D. Justification: Upgrade all servers in the Apigee appdev planet to version 4.50.00. This will enable enhanced features and bug fixes.

E. Implementation plan:
  Platform Engineering (Bikram Ghosh/Mohammed Amdad Ullah) will be performing the steps.
Tests will be performed by the API Onboarding team.

Version upgrade will be performed one server at a time so there is no expected impact to real-time traffic. 

Upgrades will be performed to the apigee components in the following order:
Cassandra, Qpid, Ldap, Routers/Message processors, Edge UI, and DB.

For each Router/ MP server:
Disable Router on F5
Disassociate  dev and test environment for that Message Processor instance.
Shutdown the Router/MP instance
Upgrade Router/MP instance
Startup the Router/MP instance
Test APIs on dev and test for that Message Processor instance.
Re-associate dev and test environment to that Message Processor instance. 
Enable Router on F5

Test APIs

F. Expected Impact: This change is in appdev environment and version upgrade will be performed one server at a time so there is no expected impact to real-time traffic. 

When a server is down, the other servers will be operational and taking real-time traffic.

G.Wrost case scenario: The API services do not function successfully, as they did before upgrading the software.

Rollback plan for software is in place

H.Remediation/Rollback plan: 

Platform Engineering (Bikram Ghosh/Mohammed Amdad Ullah) will be performing the steps.
Tests will be performed by the API Onboarding team.

Rollbacks will be performed to the apigee components in the following order:
DB, Edge UI, Routers/Message processors, Ldap, Qpid, and Cassandra.

For each Router/ MP server:
Disable Router on F5
Disassociate  dev and test environment for that Message Processor instance.
Shutdown the Router/MP instance
Rollback/downgrade Router/MP instance
Startup the Router/MP instance
Test APIs on dev and test for that Message Processor instance.
Re-associate dev and test environment to that Message Processor instance. 
Enable Router on F5

Test APIs

I.Coordination/Communication Plan: The API onboarding team has requested this change and they have been notified. The team has also notified all internal stakeholders.

J. Pre change test plan: Different Version upgrade has already been performed in the Apigee AppDev planet previously without issues.
   The APIs have also been verified in the lower planet.
   
   
Post Change testing tasks: 
 a) All APIs on the dev/test  environments on that server will be tested by the API Onboarding team before enabling it back on the F5.
 b) Dissassocaite the MPs from environments
 c) Enable back gateway router to f5
 d) Disable gateway router from f5
 e) Assocaite back MPs to the environments
 
 
Change Tasks:

a) Test APIs on dev and test environments on the affected 2 servers. Test APIs on dev and test environments.
b) All APIs on the dev/test environments on that server will be tested by the API Onboarding team before enabling it back on the F5. 
c) Disable gateway router from f5
d) Assocaite back MPs to the environments
e) Dissassocaite the MPs from environments
f) Enable back gateway router to f5